<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shane's Angel Cloud - Digital Head System</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #000;
            font-family: 'Orbitron', monospace;
            overflow: hidden;
            position: relative;
        }

        .crt-container {
            width: 100vw;
            height: 100vh;
            background: radial-gradient(ellipse at center, #001a33 0%, #000000 70%);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .crt-screen {
            width: 80vw;
            height: 80vh;
            background: #000;
            border: 20px solid #333;
            border-radius: 30px;
            position: relative;
            overflow: hidden;
            box-shadow: 
                inset 0 0 50px #00ffff33,
                0 0 100px #00ffff22;
        }

        .scan-lines {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 2px,
                rgba(0, 255, 255, 0.03) 2px,
                rgba(0, 255, 255, 0.03) 4px
            );
            pointer-events: none;
            z-index: 1000;
        }

        .digital-head-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .head-preview {
            width: 400px;
            height: 400px;
            border: 3px solid #00ffff;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #001a33, #000);
            position: relative;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .webcam-feed {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
            filter: 
                contrast(1.5) 
                brightness(1.2) 
                hue-rotate(180deg);
        }

        .digital-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, #00ffff22 0%, transparent 50%),
                linear-gradient(45deg, transparent 48%, #00ffff11 49%, #00ffff11 51%, transparent 52%);
            pointer-events: none;
        }

        .glitch-effect {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent 0%,
                #ff0000 25%,
                #00ff00 50%,
                #0000ff 75%,
                transparent 100%);
            opacity: 0;
            mix-blend-mode: screen;
            animation: glitch 3s infinite;
        }

        @keyframes glitch {
            0% { opacity: 0; transform: translateX(0); }
            2% { opacity: 0.8; transform: translateX(-5px); }
            4% { opacity: 0; transform: translateX(5px); }
            6% { opacity: 0.6; transform: translateX(-3px); }
            8% { opacity: 0; transform: translateX(0); }
            100% { opacity: 0; }
        }

        .controls {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
            z-index: 100;
        }

        .control-btn {
            background: linear-gradient(45deg, #001a33, #003366);
            border: 2px solid #00ffff;
            color: #00ffff;
            padding: 15px 25px;
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            font-size: 14px;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .control-btn:hover {
            background: linear-gradient(45deg, #003366, #0066cc);
            box-shadow: 0 0 20px #00ffff66;
            transform: scale(1.05);
        }

        .control-btn:active {
            transform: scale(0.95);
        }

        .status-display {
            position: absolute;
            top: 30px;
            left: 30px;
            color: #00ffff;
            font-family: 'Orbitron', monospace;
            font-size: 16px;
            z-index: 100;
        }

        .angel-cloud-title {
            position: absolute;
            top: 30px;
            right: 30px;
            color: #00ffff;
            font-family: 'Orbitron', monospace;
            font-size: 24px;
            font-weight: 900;
            text-shadow: 0 0 20px #00ffff;
            z-index: 100;
        }

        .voice-visualizer {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 3px;
            height: 40px;
            align-items: end;
        }

        .voice-bar {
            width: 4px;
            background: #00ffff;
            border-radius: 2px;
            transition: height 0.1s;
            box-shadow: 0 0 10px #00ffff;
        }

        .startup-sequence {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .startup-text {
            color: #00ffff;
            font-family: 'Orbitron', monospace;
            font-size: 36px;
            font-weight: 900;
            text-align: center;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; text-shadow: 0 0 20px #00ffff; }
            50% { opacity: 0.5; text-shadow: 0 0 5px #00ffff; }
        }

        .digital-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 255, 255, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 255, 0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            pointer-events: none;
            opacity: 0.3;
        }
    </style>
</head>
<body>
    <div class="crt-container">
        <div class="crt-screen">
            <div class="scan-lines"></div>
            <div class="digital-grid"></div>
            
            <div class="startup-sequence" id="startupScreen">
                <div class="startup-text">
                    INITIALIZING ANGEL CLOUD<br>
                    DIGITAL HEAD SYSTEM<br>
                    <span style="font-size: 18px;">Shane Brazelton Avatar</span>
                </div>
            </div>

            <div class="status-display" id="statusDisplay">
                SYSTEM: OFFLINE
            </div>

            <div class="angel-cloud-title">
                ANGEL CLOUD
            </div>

            <div class="digital-head-container" id="mainInterface" style="display: none;">
                <div class="head-preview">
                    <video id="webcamFeed" class="webcam-feed" autoplay muted></video>
                    <div class="digital-overlay"></div>
                    <div class="glitch-effect"></div>
                </div>

                <div class="controls">
                    <button class="control-btn" onclick="startWebcam()">ACTIVATE CAMERA</button>
                    <button class="control-btn" onclick="startVoiceCapture()">VOICE CAPTURE</button>
                    <button class="control-btn" onclick="toggleGlitch()">GLITCH MODE</button>
                    <button class="control-btn" onclick="saveAvatar()">SAVE AVATAR</button>
                    <button class="control-btn" onclick="enterAIMode()">AI MODE</button>
                </div>

                <div class="voice-visualizer" id="voiceVisualizer">
                    <!-- Voice bars will be generated here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        let webcamStream = null;
        let voiceStream = null;
        let glitchActive = false;
        let audioContext = null;
        let analyser = null;

        // Startup sequence
        setTimeout(() => {
            document.getElementById('startupScreen').style.display = 'none';
            document.getElementById('mainInterface').style.display = 'flex';
            document.getElementById('statusDisplay').textContent = 'SYSTEM: READY';
        }, 3000);

        // Generate voice visualizer bars
        function generateVoiceBars() {
            const visualizer = document.getElementById('voiceVisualizer');
            for (let i = 0; i < 20; i++) {
                const bar = document.createElement('div');
                bar.className = 'voice-bar';
                bar.style.height = '5px';
                visualizer.appendChild(bar);
            }
        }

        // Start webcam
        async function startWebcam() {
            try {
                webcamStream = await navigator.mediaDevices.getUserMedia({ 
                    video: { 
                        width: 640, 
                        height: 480,
                        facingMode: 'user'
                    } 
                });
                
                const video = document.getElementById('webcamFeed');
                video.srcObject = webcamStream;
                
                document.getElementById('statusDisplay').textContent = 'CAMERA: ACTIVE';
                
                // Start facial recognition processing
                processVideoFrame();
                
            } catch (error) {
                console.error('Webcam error:', error);
                document.getElementById('statusDisplay').textContent = 'CAMERA: ERROR';
            }
        }

        // Process video frames for facial mapping
        function processVideoFrame() {
            // This would integrate with face detection libraries
            // For now, we'll simulate face tracking
            setInterval(() => {
                if (webcamStream) {
                    // Simulate face detection data
                    updateDigitalHead();
                }
            }, 100);
        }

        // Update digital head based on face data
        function updateDigitalHead() {
            // Apply real-time effects based on facial expressions
            const overlay = document.querySelector('.digital-overlay');
            if (Math.random() > 0.95) {
                overlay.style.opacity = Math.random() * 0.5;
                setTimeout(() => overlay.style.opacity = '1', 100);
            }
        }

        // Voice capture and analysis
        async function startVoiceCapture() {
            try {
                voiceStream = await navigator.mediaDevices.getUserMedia({ audio: true });
                
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                analyser = audioContext.createAnalyser();
                const source = audioContext.createMediaStreamSource(voiceStream);
                source.connect(analyser);
                
                analyser.fftSize = 64;
                
                document.getElementById('statusDisplay').textContent = 'VOICE: ACTIVE';
                
                // Start voice visualization
                visualizeVoice();
                
            } catch (error) {
                console.error('Voice capture error:', error);
                document.getElementById('statusDisplay').textContent = 'VOICE: ERROR';
            }
        }

        // Visualize voice input
        function visualizeVoice() {
            const dataArray = new Uint8Array(analyser.frequencyBinCount);
            const bars = document.querySelectorAll('.voice-bar');
            
            function animate() {
                analyser.getByteFrequencyData(dataArray);
                
                for (let i = 0; i < bars.length; i++) {
                    const height = (dataArray[i] / 255) * 40;
                    bars[i].style.height = Math.max(height, 2) + 'px';
                    bars[i].style.boxShadow = `0 0 ${height/2}px #00ffff`;
                }
                
                // Sync mouth movement with voice
                if (webcamStream) {
                    syncMouthMovement(dataArray);
                }
                
                requestAnimationFrame(animate);
            }
            
            animate();
        }

        // Sync facial animation with voice
        function syncMouthMovement(audioData) {
            const avgVolume = audioData.reduce((a, b) => a + b) / audioData.length;
            const video = document.getElementById('webcamFeed');
            
            // Apply mouth movement effects based on volume
            if (avgVolume > 50) {
                video.style.filter = `
                    contrast(1.5) 
                    brightness(1.2) 
                    hue-rotate(180deg) 
                    saturate(${1 + avgVolume/500})
                `;
            }
        }

        // Toggle glitch effects
        function toggleGlitch() {
            glitchActive = !glitchActive;
            const glitchEffect = document.querySelector('.glitch-effect');
            
            if (glitchActive) {
                glitchEffect.style.animationDuration = '0.5s';
                document.getElementById('statusDisplay').textContent = 'GLITCH: ACTIVE';
            } else {
                glitchEffect.style.animationDuration = '3s';
                document.getElementById('statusDisplay').textContent = 'GLITCH: NORMAL';
            }
        }

        // Save current avatar state
        function saveAvatar() {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const video = document.getElementById('webcamFeed');
            
            canvas.width = 400;
            canvas.height = 400;
            
            // Draw current video frame
            ctx.drawImage(video, 0, 0, 400, 400);
            
            // Save as avatar data
            const avatarData = canvas.toDataURL('image/png');
            
            // This would save to your Angel Cloud system
            console.log('Avatar saved:', avatarData.substring(0, 50) + '...');
            document.getElementById('statusDisplay').textContent = 'AVATAR: SAVED';
            
            // Create download link
            const link = document.createElement('a');
            link.download = 'shane-angel-cloud-avatar.png';
            link.href = avatarData;
            link.click();
        }

        // Enter AI mode (when Shane is not available)
        function enterAIMode() {
            document.getElementById('statusDisplay').textContent = 'AI MODE: ACTIVE';
            
            // This would switch to AI-controlled responses
            // Using saved avatar and voice patterns
            alert('AI Mode: Angel Cloud will now respond as your digital representative');
        }

        // Initialize voice visualizer on load
        generateVoiceBars();

        // Add keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === ' ') {
                e.preventDefault();
                toggleGlitch();
            }
            if (e.key === 'c') {
                startWebcam();
            }
            if (e.key === 'v') {
                startVoiceCapture();
            }
            if (e.key === 's') {
                saveAvatar();
            }
            if (e.key === 'a') {
                enterAIMode();
            }
        });

        console.log('🧠 ANGEL CLOUD DIGITAL HEAD SYSTEM LOADED');
        console.log('🎮 Controls: C=Camera, V=Voice, Space=Glitch, S=Save, A=AI Mode');
    </script>
</body>

</html>
